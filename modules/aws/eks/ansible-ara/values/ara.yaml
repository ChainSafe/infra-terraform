image: ghcr.io/chainsafe/infra-docker/ara:v0.3.0

env:
  ARA_ALLOWED_HOSTS: "['localhost', '::1', '127.0.0.1', '${ara_dns}']"
  ARA_EXTERNAL_AUTH: "True"
  ARA_READ_LOGIN_REQUIRED: "False"
  ARA_WRITE_LOGIN_REQUIRED: "False"

persistence:
  enabled: true

ingress:
  enabled: true
  ingressClassName: nginx

  annotations:
    kubernetes.io/tls-acme: "true"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    # nginx.ingress.kubernetes.io/auth-url: https://${oauth_dns}/oauth2/auth
    # nginx.ingress.kubernetes.io/auth-signin: https://${oauth_dns}/oauth2/start?rd=$scheme://$host$request_uri
    # nginx.ingress.kubernetes.io/auth-response-headers: X-Auth-Request-User, X-Auth-Request-Email, X-Auth-Request-Groups
  hosts:
    - ${ara_dns}
nodeSelector:
  nodegroup: automation-arm64
